<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<link rel="search" type="application/opensearchdescription+xml" title="GraphQL Tools" href="/opensearch.xml">
<script src="https://the-guild.dev/static/banner.js" async defer="defer"></script><title data-react-helmet="true">Migration from v4 &amp; v5 | GraphQL Tools</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Migration from v4 &amp; v5 | GraphQL Tools"><meta data-react-helmet="true" name="description" content="Migration from GraphQL Tools v4 &amp; v5"><meta data-react-helmet="true" property="og:description" content="Migration from GraphQL Tools v4 &amp; v5"><meta data-react-helmet="true" property="og:url" content="https://graphql-tools.com/docs/migration-from-tools-v5"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://graphql-tools.com/docs/migration-from-tools-v5"><link rel="stylesheet" href="/styles.ab79995c.css">
<link rel="preload" href="/styles.212b7080.js" as="script">
<link rel="preload" href="/runtime~main.e36f0f04.js" as="script">
<link rel="preload" href="/main.9cba646c.js" as="script">
<link rel="preload" href="/1.beecbf3d.js" as="script">
<link rel="preload" href="/2.88af7d5b.js" as="script">
<link rel="preload" href="/39.4c124d2d.js" as="script">
<link rel="preload" href="/20ac7829.e5642e25.js" as="script">
<link rel="preload" href="/b0885098.804d758b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):(e.matches,t("dark"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="GraphQL Tools Logo"></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">API &amp; Documentation</a><a href="https://github.com/ardatan/graphql-tools" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://the-guild.dev/contact" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contact Us</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_3J-v"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_2gVI moon_31ON"></span></div><div class="react-toggle-track-x"><span class="toggle_2gVI sun_3aEv"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_3Vqu"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Fhd" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_3kRb"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="GraphQL Tools Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/introduction">API &amp; Documentation</a></li><li class="menu__list-item"><a href="https://github.com/ardatan/graphql-tools" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://the-guild.dev/contact" target="_blank" rel="noopener noreferrer" class="menu__link">Contact Us</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2GaM"><div class="docSidebarContainer_1duB"><div class="sidebar_1FX9"><div class="menu menu--responsive menu_NtkP"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_3VWg" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/generate-schema">Generating an executable schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/resolvers-composition">Resolvers composition</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/scalars">Custom scalars and enums</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/mocking">Mocking</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/connectors">Data fetching</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema-directives">Schema directives</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/directive-resolvers">Directive resolvers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema-delegation">Schema delegation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/remote-schemas">Remote schemas</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema-wrapping">Schema wrapping</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Schema merging</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/merge-typedefs">Type definitions (SDL) merging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/merge-resolvers">Resolvers merging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/merge-schemas">GraphQLSchema merging</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema-stitching">Schema stitching</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/server-setup">Setup an HTTP server</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema-loading">Schema loading</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/documents-loading">Documents loading</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/graphql-tag-pluck">GraphQL Tag Pluck</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/relay-operation-optimizer">Relay Operation Optimizer</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Migration</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/migration-from-tools-v5">From v4 &amp; v5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/migration-from-toolkit">From GraphQL Toolkit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/migration-from-merge-graphql-schemas">From Merge GraphQL Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/migration-from-import">From GraphQL Import</a></li></ul></li></ul></div></div></div><main class="docMainContainer_1RNg"><div class="container padding-vert--lg docItemWrapper_1vmU"><div class="row"><div class="col docItemCol_1Z0t"><div class="docItemContainer_2vWn"><article><header><h1 class="docTitle_2AEX">Migration from v4 &amp; v5</h1></header><div class="markdown"><p>If you&#x27;re using old versions of GraphQL Tools, it is easy to migrate from those versions to v6 and later. But you need to install specific packages according to your needs instead of single large <code>graphql-tools</code> package because we switched to monorepo.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3uD0" id="schema-generation-and-decoration-api-graphql-toolsschema"></a>Schema Generation and Decoration API (<code>@graphql-tools/schema</code>)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#schema-generation-and-decoration-api-graphql-toolsschema" title="Direct link to heading">#</a></h4><p>Majority of schema modification functions has been renamed and they now return new schemas without editing the original schema, rather than modifying the original schema in place. The return value of the function has the new schema:</p><ul><li><code>makeExecutableSchema</code></li><li><code>addResolveFunctionsToSchema</code> =&gt; <code>addResolversToSchema</code></li><li><code>attachDirectiveResolvers</code></li><li><code>addSchemaLevelResolveFunctions</code> =&gt; <code>addSchemaLevelResolver</code></li><li><code>addCatchUndefinedToSchema</code></li><li><code>addErrorLoggingToSchema</code></li><li><code>addMockFunctionsToSchema</code> =&gt; <code>addMocksToSchema</code></li><li><code>addConnectorsToContext</code> has been deprecated, attaching context manually is clearer</li><li><ul><li>See <a href="https://github.com/ardatan/graphql-tools/issues/140" target="_blank" rel="noopener noreferrer">#140</a></li></ul></li></ul><p>Schema modification functions operating on fields now similarly take a schema as a parameter and return a new schema, rather than modifying the passed in typeMap (and requiring manual schema healing)</p><ul><li><ul><li><code>appendObjectFields</code></li></ul></li><li><ul><li><code>removeObjectFields</code></li></ul></li></ul><p>Abstract types that use resolveType properties to return an actual type rather than a type name may be unstable when using graphql-tools, as these types are hidden from the type map and cannot be recreated. These resolveType resolvers should be relatively easy to rewrite to use the name of a known <code>GraphQLObject</code> type included within the schema’s type map. This may limit the use of <code>graphql-tools</code> for advanced schemas that rely on dynamic abstract types, but greatly simplifies the code base.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3uD0" id="remote-schema--wrapping-makeremoteexecutableschema-and-graphql-toolswrap"></a>Remote Schema &amp; Wrapping (<code>makeRemoteExecutableSchema</code> and <code>@graphql-tools/wrap</code>)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#remote-schema--wrapping-makeremoteexecutableschema-and-graphql-toolswrap" title="Direct link to heading">#</a></h4><ul><li><p>Remote schema wrapping is now accomplished by using executors and subscribers rather than fetchers and links. Functions that convert links to executors/subscribers are included with @graphql-tools/links. <a href="/docs/remote-schemas">See the docs</a>.</p></li><li><p><code>Transform</code>&lt;*&gt;<code>Field Transforms</code> now all take a <code>fieldTransformer</code> with altered <code>FieldTransformer</code> type.
A FieldTransformer receives a field config as an argument rather than a field, so that library users are spared having to call fieldToFieldConfig. A <code>FieldTransformer</code> can return an array of type <code>[string, GraphQLFieldConfig&lt;any, any&gt;]</code> instead of an object <code>{ name: string, field: GraphQLFieldConfig&lt;any, any&gt; }</code> if it wishes to rename the field, the tuple is less verbose and the object is misnamed, it should be { newName, newFieldConfig } anyway.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3uD0" id="schema-stitching-stitchschemas--graphql-toolsstitch"></a>Schema Stitching (<code>stitchSchemas</code> &amp; <code>@graphql-tools/stitch</code>)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#schema-stitching-stitchschemas--graphql-toolsstitch" title="Direct link to heading">#</a></h4><ul><li>stitching has been renamed (<code>mergeSchemas</code> =&gt; <code>stitchSchemas</code>)</li><li>use selectionSet hints instead of fragment hints within the resolver map</li><li>Allows inheritance from interfaces
resolvers passed to stitchSchemas match type of resolvers passed to makeExecutableSchema (and can no longer be functions). Stitching metadata stored within “mergeInfo” may still be accessed within each resolver as info.mergeInfo</li><li>Custom proxying resolvers now take an options object instead of individual parameters, a breaking change from v5, when the custom proxying resolvers were introduced</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3uD0" id="schema-delegation-delegatetoschema--graphql-toolsdelegate"></a>Schema Delegation (<code>delegateToSchema</code> &amp; <code>@graphql-tools/delegate</code>)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#schema-delegation-delegatetoschema--graphql-toolsdelegate" title="Direct link to heading">#</a></h4><p><code>delegateToSchema</code> is not available in <code>mergeInfo</code> anymore. You need to import that <code>delegateToSchema</code> function from this package instead.</p><ul><li><code>info.mergeInfo.delegate</code> &amp; <code>info.mergeInfo.delegateToSchema</code> =&gt; <code>delegateToSchema</code></li></ul><p>Instead of <code>mergeInfo</code> in <code>GraphQLResolveInfo</code>, we have <code>stitchingInfo</code> in <code>GraphQLSchema</code>s extensions.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3uD0" id="some-other-utils-graphql-toolsutils"></a>Some other utils (<code>@graphql-tools/utils</code>)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#some-other-utils-graphql-toolsutils" title="Direct link to heading">#</a></h4><ul><li>Polyfills for graphql versions earlier than 14.2 have been removed, including <code>toConfig</code></li><li><code>fieldToFieldConfig</code> and <code>inputFieldToInputFieldConfig</code> functionality is now exported separately, although library users should ideally not have to use them.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ardatan/graphql-tools/edit/master/website/docs/migration-from-tools-v5.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/relay-operation-optimizer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Optimizing operations using Relay Compiler</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/migration-from-toolkit"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migration from GraphQL Toolkit »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3iTc"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="http://bit.ly/guild-chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/graphql-tools" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Urigo/graphql-tools/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/TheGuildDev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 The Guild, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.212b7080.js"></script>
<script src="/runtime~main.e36f0f04.js"></script>
<script src="/main.9cba646c.js"></script>
<script src="/1.beecbf3d.js"></script>
<script src="/2.88af7d5b.js"></script>
<script src="/39.4c124d2d.js"></script>
<script src="/20ac7829.e5642e25.js"></script>
<script src="/b0885098.804d758b.js"></script>
</body>
</html>